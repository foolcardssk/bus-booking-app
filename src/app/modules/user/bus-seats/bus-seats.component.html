<div class="container">
    <div *ngIf="pickedSeats.length == 5" class="text-center" style="color: red">
        Max. 5 seats reached !
    </div>
    <div style="display: flex; justify-content: space-between">
        <svg width="320" height="430" [currentScale]="scale">
            <!-- Draw bus background -->
            <g transform="rotate(90, 200, 200)">
                <rect
                    x="10"
                    y="90"
                    width="520"
                    height="220"
                    rx="20"
                    ry="20"
                    fill="#f2f2f2"
                />
                <!-- Draw bus seats -->
                <g id="seats" [attr.transform]="'translate(10, 0)'">
                    <ng-container
                        *ngFor="
                            let row of busLayout.lowerDeck | keyvalue;
                            let rowIndex = index
                        "
                    >
                        <ng-container
                            *ngFor="let seat of row.value; let i = index"
                        >
                            <!-- Check if the seat is unbooked -->
                            <ng-container *ngIf="!seat.booked">
                                <rect
                                    [attr.x]="
                                        40 +
                                        i *
                                            (seat.seatType === 'sleeper'
                                                ? 100
                                                : 55)
                                    "
                                    [attr.y]="
                                        seat.seatType === 'sleeper' &&
                                        rowIndex === 2
                                            ? 260
                                            : 100 + rowIndex * 40
                                    "
                                    [attr.width]="
                                        seat.seatType === 'sleeper' ? 65 : 30
                                    "
                                    height="30"
                                    rx="5"
                                    ry="5"
                                    (click)="
                                        onUnbookedSeatClick(
                                            seat.seatNumber,
                                            seat.seatType,
                                            seat.price
                                        )
                                    "
                                    [ngStyle]="{
                                        fill: isSeatSelected(seat.seatNumber)
                                    }"
                                />
                                <!-- Display seat number -->
                                <text
                                    [attr.x]="
                                        55 +
                                        i *
                                            (seat.seatType === 'sleeper'
                                                ? 100
                                                : 55)
                                    "
                                    [attr.y]="
                                        seat.seatType === 'sleeper' &&
                                        rowIndex === 2
                                            ? 280
                                            : 120 + rowIndex * 40
                                    "
                                    font-size="15"
                                    fill="black"
                                    text-anchor="middle"
                                    alignment-baseline="middle"
                                    [style.pointer-events]="'none'"
                                >
                                    {{ seat.seatNumber }}
                                </text>
                            </ng-container>
                            <!-- Add a placeholder for booked seats -->
                            <ng-container *ngIf="seat.booked">
                                <rect
                                    [attr.x]="
                                        40 +
                                        i *
                                            (seat.seatType === 'sleeper'
                                                ? 100
                                                : 55)
                                    "
                                    [attr.y]="
                                        seat.seatType === 'sleeper' &&
                                        rowIndex === 2
                                            ? 260
                                            : 100 + rowIndex * 40
                                    "
                                    [attr.width]="
                                        seat.seatType === 'sleeper' ? 65 : 30
                                    "
                                    height="30"
                                    rx="5"
                                    ry="5"
                                    [attr.fill]="
                                        seat.gender === 'male'
                                            ? 'lightblue'
                                            : seat.gender === 'female'
                                            ? 'lightpink'
                                            : '#ffffff'
                                    "
                                />
                            </ng-container>
                        </ng-container>
                    </ng-container>
                </g>
            </g>
        </svg>

        <svg width="320" height="430" [currentScale]="scale">
            <!-- Draw bus background -->
            <g transform="rotate(90, 200, 200)">
                <rect
                    x="10"
                    y="90"
                    width="520"
                    height="220"
                    rx="20"
                    ry="20"
                    fill="#f2f2f2"
                />
                <!-- Draw bus seats -->
                <g id="seats" [attr.transform]="'translate(10, 0)'">
                    <ng-container
                        *ngFor="
                            let row of busLayout.upperDeck | keyvalue;
                            let rowIndex = index
                        "
                    >
                        <ng-container
                            *ngFor="let seat of row.value; let i = index"
                        >
                            <!-- Check if the seat is unbooked -->
                            <ng-container *ngIf="!seat.booked">
                                <rect
                                    [attr.x]="
                                        40 +
                                        i *
                                            (seat.seatType === 'sleeper'
                                                ? 100
                                                : 50)
                                    "
                                    [attr.y]="
                                        seat.seatType === 'sleeper' &&
                                        rowIndex === 2
                                            ? 260
                                            : 110 + rowIndex * 40
                                    "
                                    [attr.width]="
                                        seat.seatType === 'sleeper' ? 65 : 30
                                    "
                                    height="30"
                                    rx="5"
                                    ry="5"
                                    (click)="
                                        onUnbookedSeatClick(
                                            seat.seatNumber,
                                            seat.seatType,
                                            seat.price
                                        )
                                    "
                                    [ngStyle]="{
                                        fill: isSeatSelected(seat.seatNumber)
                                    }"
                                />
                                <!-- Display seat number -->
                                <text
                                    [attr.x]="
                                        75 +
                                        i *
                                            (seat.seatType === 'sleeper'
                                                ? 100
                                                : 60)
                                    "
                                    [attr.y]="
                                        seat.seatType === 'sleeper' &&
                                        rowIndex === 2
                                            ? 280
                                            : 125 + rowIndex * 40
                                    "
                                    font-size="15"
                                    fill="black"
                                    text-anchor="middle"
                                    alignment-baseline="middle"
                                    [style.pointer-events]="'none'"
                                >
                                    {{ seat.seatNumber }}
                                </text>
                            </ng-container>
                            <!-- Add a placeholder for booked seats -->
                            <ng-container *ngIf="seat.booked">
                                <rect
                                    [attr.x]="
                                        40 +
                                        i *
                                            (seat.seatType === 'sleeper'
                                                ? 100
                                                : 50)
                                    "
                                    [attr.y]="
                                        seat.seatType === 'sleeper' &&
                                        rowIndex === 2
                                            ? 260
                                            : 110 + rowIndex * 40
                                    "
                                    [attr.width]="
                                        seat.seatType === 'sleeper' ? 65 : 30
                                    "
                                    height="30"
                                    rx="5"
                                    ry="5"
                                    [attr.fill]="
                                        seat.gender === 'male'
                                            ? 'lightblue'
                                            : seat.gender === 'female'
                                            ? 'lightpink'
                                            : '#ffffff'
                                    "
                                />
                            </ng-container>
                        </ng-container>
                    </ng-container>
                </g>
            </g>
        </svg>
    </div>
</div>
